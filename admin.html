<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Panel</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 520px;
      margin: 40px auto;
    }
    input, textarea, button {
      width: 100%;
      padding: 10px;
      margin-top: 6px;
    }
    button {
      background: #2563eb;
      color: #fff;
      border: none;
      cursor: pointer;
    }
    button:disabled {
      background: #94a3b8;
    }
    .status {
      margin-top: 15px;
      padding: 10px;
      white-space: pre-line;
      font-weight: bold;
    }
    .loading { color: #0369a1; }
    .success { color: #166534; }
    .error   { color: #991b1b; }
  </style>
</head>
<body>

<h2>Publish Product</h2>

<form id="form">
  <label>Image URL</label>
  <input id="image" required>

  <label>Title</label>
  <input id="title" required>

  <label>Price</label>
  <input id="price" required>

  <label>Description</label>
  <textarea id="desc" required></textarea>

  <button id="btn">Publish</button>
</form>

<div id="status" class="status"></div>

<script>
  const WORKER_URL = "https://still-bush-f7e3site-admin-api.devweebstudio.workers.dev";

  const form = document.getElementById("form");
  const statusBox = document.getElementById("status");
  const btn = document.getElementById("btn");

  form.addEventListener("submit", async function (e) {
    e.preventDefault();

    statusBox.className = "status loading";
    statusBox.textContent = "Publishingâ€¦ please wait";
    btn.disabled = true;

    try {
      const res = await fetch(WORKER_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          image: document.getElementById("image").value,
          title: document.getElementById("title").value,
          price: document.getElementById("price").value,
          desc: document.getElementById("desc").value
        })
      });

      const text = await res.text();

      if (!res.ok) {
        throw new Error(text);
      }

      statusBox.className = "status success";
      statusBox.textContent = "SUCCESS:\n" + text;
      form.reset();

    } catch (err) {
      statusBox.className = "status error";
      statusBox.textContent = "ERROR:\n" + err.message;
    }

    btn.disabled = false;
  });
</script>

</body>
</html>
